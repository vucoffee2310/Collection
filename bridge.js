(()=>{var e={3156:function(e,r,s){var t,n;!function(o,a){"use strict";t=function(){var e=function(){},r="undefined",s=typeof window!==r&&typeof window.navigator!==r&&/Trident\/|MSIE /.test(window.navigator.userAgent),t=["trace","debug","info","warn","error"],n={},o=null;function a(e,r){var s=e[r];if("function"==typeof s.bind)return s.bind(e);try{return Function.prototype.bind.call(s,e)}catch(r){return function(){return Function.prototype.apply.apply(s,[e,arguments])}}}function i(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function g(t){return"debug"===t&&(t="log"),typeof console!==r&&("trace"===t&&s?i:void 0!==console[t]?a(console,t):void 0!==console.log?a(console,"log"):e)}function m(){for(var s=this.getLevel(),n=0;n<t.length;n++){var o=t[n];this[o]=n<s?e:this.methodFactory(o,s,this.name)}if(this.log=this.debug,typeof console===r&&s<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==r&&(m.call(this),this[e].apply(this,arguments))}}function c(e,r,s){return g(e)||l.apply(this,arguments)}function A(e,s){var a,i,g,l=this,A="loglevel";function d(e){var s=(t[e]||"silent").toUpperCase();if(typeof window!==r&&A){try{return void(window.localStorage[A]=s)}catch(e){}try{window.document.cookie=encodeURIComponent(A)+"="+s+";"}catch(e){}}}function u(){var e;if(typeof window!==r&&A){try{e=window.localStorage[A]}catch(e){}if(typeof e===r)try{var s=window.document.cookie,t=encodeURIComponent(A),n=s.indexOf(t+"=");-1!==n&&(e=/^([^;]+)/.exec(s.slice(n+t.length+1))[1])}catch(e){}return void 0===l.levels[e]&&(e=void 0),e}}function p(){if(typeof window!==r&&A){try{window.localStorage.removeItem(A)}catch(e){}try{window.document.cookie=encodeURIComponent(A)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function f(e){var r=e;if("string"==typeof r&&void 0!==l.levels[r.toUpperCase()]&&(r=l.levels[r.toUpperCase()]),"number"==typeof r&&r>=0&&r<=l.levels.SILENT)return r;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?A+=":"+e:"symbol"==typeof e&&(A=void 0),l.name=e,l.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},l.methodFactory=s||c,l.getLevel=function(){return null!=g?g:null!=i?i:a},l.setLevel=function(e,r){return g=f(e),!1!==r&&d(g),m.call(l)},l.setDefaultLevel=function(e){i=f(e),u()||l.setLevel(e,!1)},l.resetLevel=function(){g=null,p(),m.call(l)},l.enableAll=function(e){l.setLevel(l.levels.TRACE,e)},l.disableAll=function(e){l.setLevel(l.levels.SILENT,e)},l.rebuild=function(){if(o!==l&&(a=f(o.getLevel())),m.call(l),o===l)for(var e in n)n[e].rebuild()},a=f(o?o.getLevel():"WARN");var x=u();null!=x&&(g=f(x)),m.call(l)}(o=new A).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var r=n[e];return r||(r=n[e]=new A(e,o.methodFactory)),r};var d=typeof window!==r?window.log:void 0;return o.noConflict=function(){return typeof window!==r&&window.log===o&&(window.log=d),o},o.getLoggers=function(){return n},o.default=o,o},void 0===(n="function"==typeof t?t.call(r,s,r,e):t)||(e.exports=n)}()},3773:function(e,r){var s,t,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,t=[e],s=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",s=e=>{const s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(s).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class t extends WeakMap{constructor(e,r=void 0){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=e=>e&&"object"==typeof e&&"function"==typeof e.then,o=(r,s)=>(...t)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):s.singleCallbackArg||t.length<=1&&!1!==s.singleCallbackArg?r.resolve(t[0]):r.resolve(t)},a=e=>1==e?"argument":"arguments",i=(e,r)=>function(s,...t){if(t.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${t.length}`);if(t.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${t.length}`);return new Promise(((n,a)=>{if(r.fallbackToNoCallback)try{s[e](...t,o({resolve:n,reject:a},r))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),s[e](...t),r.fallbackToNoCallback=!1,r.noCallback=!0,n()}else r.noCallback?(s[e](...t),n()):s[e](...t,o({resolve:n,reject:a},r))}))},g=(e,r,s)=>new Proxy(r,{apply:(r,t,n)=>s.call(t,e,...n)});let m=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,r={},s={})=>{let t=Object.create(null),n={has:(r,s)=>s in e||s in t,get(n,o,a){if(o in t)return t[o];if(!(o in e))return;let c=e[o];if("function"==typeof c)if("function"==typeof r[o])c=g(e,e[o],r[o]);else if(m(s,o)){let r=i(o,s[o]);c=g(e,e[o],r)}else c=c.bind(e);else if("object"==typeof c&&null!==c&&(m(r,o)||m(s,o)))c=l(c,r[o],s[o]);else{if(!m(s,"*"))return Object.defineProperty(t,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(r){e[o]=r}}),c;c=l(c,r[o],s["*"])}return t[o]=c,c},set:(r,s,n,o)=>(s in t?t[s]=n:e[s]=n,!0),defineProperty:(e,r,s)=>Reflect.defineProperty(t,r,s),deleteProperty:(e,r)=>Reflect.deleteProperty(t,r)},o=Object.create(e);return new Proxy(o,n)},c=e=>({addListener(r,s,...t){r.addListener(e.get(s),...t)},hasListener:(r,s)=>r.hasListener(e.get(s)),removeListener(r,s){r.removeListener(e.get(s))}}),A=new t((e=>"function"!=typeof e?e:function(r){const s=l(r,{},{getContent:{minArgs:0,maxArgs:0}});e(s)})),d=new t((e=>"function"!=typeof e?e:function(r,s,t){let o,a,i=!1,g=new Promise((e=>{o=function(r){i=!0,e(r)}}));try{a=e(r,s,o)}catch(e){a=Promise.reject(e)}const m=!0!==a&&n(a);if(!0!==a&&!m&&!i)return!1;const l=e=>{e.then((e=>{t(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",t({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return l(m?a:g),!0})),u=({reject:s,resolve:t},n)=>{e.runtime.lastError?e.runtime.lastError.message===r?t():s(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?s(new Error(n.message)):t(n)},p=(e,r,s,...t)=>{if(t.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${t.length}`);if(t.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${t.length}`);return new Promise(((e,r)=>{const n=u.bind(null,{resolve:e,reject:r});t.push(n),s.sendMessage(...t)}))},f={devtools:{network:{onRequestFinished:c(A)}},runtime:{onMessage:c(d),onMessageExternal:c(d),sendMessage:p.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:p.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},x={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":x},services:{"*":x},websites:{"*":x}},l(e,f,s)};e.exports=s(chrome)}else e.exports=globalThis.browser},void 0===(n="function"==typeof s?s.apply(r,t):s)||(e.exports=n)}},r={};function s(t){var n=r[t];if(void 0!==n)return n.exports;var o=r[t]={exports:{}};return e[t].call(o.exports,o,o.exports,s),o.exports}s.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return s.d(r,{a:r}),r},s.d=(e,r)=>{for(var t in r)s.o(r,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},s.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),(()=>{"use strict";var e=s(3773),r=s.n(e),t=s(3156),n=s.n(t);n().setLevel("error");const o=n();class a{static NAMESPACE="migomhggnppjdijnfkiimcpjgnhmnale__crosspilot_runtime_message__";listeners={};globalListener;constructor(e){r().runtime.onMessage.addListener(((r,s)=>{if(r.namespace!==a.NAMESPACE||r.target!==e)return;const{name:t,data:n}=r,i=s.tab?.id,{frameId:g}=s,m=this.listeners[t];if("function"==typeof this.globalListener)return Promise.resolve(this.globalListener(t,n,m,i,g));if("function"!=typeof m)return void o.warn(`Listener for message "${t}" not found.`,{message:r});const l=m(n,i,g);return Promise.resolve(l)}))}on(e,r){this.listeners[e]=r}onAll(e){this.globalListener=e}send(e,s,t,n,o){const i={namespace:a.NAMESPACE,target:e,name:s,data:t};if(n){const e={};return o&&(e.frameId=o),r().tabs.sendMessage(n,i,e)}return r().runtime.sendMessage(i)}}const i={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let g;const m=new Uint8Array(16);function l(){if(!g&&(g="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g(m)}const c=[];for(let e=0;e<256;++e)c.push((e+256).toString(16).slice(1));function A(e,r=0){return c[e[r+0]]+c[e[r+1]]+c[e[r+2]]+c[e[r+3]]+"-"+c[e[r+4]]+c[e[r+5]]+"-"+c[e[r+6]]+c[e[r+7]]+"-"+c[e[r+8]]+c[e[r+9]]+"-"+c[e[r+10]]+c[e[r+11]]+c[e[r+12]]+c[e[r+13]]+c[e[r+14]]+c[e[r+15]]}const d=function(e,r,s){if(i.randomUUID&&!r&&!e)return i.randomUUID();const t=(e=e||{}).random||(e.rng||l)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,r){s=s||0;for(let e=0;e<16;++e)r[s+e]=t[e];return r}return A(t)};function u(e){return e&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function p(e){return e}function f(e,r){const s=(r=r||{}).delimiter||".",t=r.maxDepth,n=r.transformKey||p,o={};return function e(a,i,g){g=g||1,Object.keys(a).forEach((function(m){const l=a[m],c=r.safe&&Array.isArray(l),A=Object.prototype.toString.call(l),d=u(l),p="[object Object]"===A||"[object Array]"===A,f=i?i+s+n(m):n(m);if(!c&&!d&&p&&Object.keys(l).length&&(!r.maxDepth||g<t))return e(l,f,g+1);o[f]=l}))}(e),o}const x={sync:{uuid:"__CROSSPILOT_UUID__",user_type:"__CROSSPILOT_USER_TYPE__",no_extension_warning:"__NO_EXTENSION_ATTEMPT_STORAGE_KEY__",app:{data:"__APP_DATA__"}},local:{installed_at:"__CROSSPILOT_INSTALLED_AT__",updated_at:"__CROSSPILOT_UPDATED_AT__",session_id:"__CROSSPILOT_SESSION_ID__",last_update_check:"__CROSSPILOT_LAST_UPDATE_CHECK__",last_no_extension_warning:"__CROSSPILOT_LAST_NO_EXTENSION_WARNING__",ga4_fired_events:"__GA4_FIRED_EVENTS__",api_schema:"__API_SCHEMA__",update_status:"__UPDATE_STATUS__",app:{data:"__APP_DATA__",files:"__APP_FILES__",installation_params:"__APP_INSTALLATION_PARAMS__",temp_installation_data:"__APP_TEMP_INSTALL_DATA__",compiled_data:"__APP_COMPILED_DATA__",compiled_pages:"__APP_COMPILED_PAGES__",local_storage_data:"__APP_LOCAL_STORAGE_DATA"}}};class h{static transformArgs(e,r){switch(e){case"storage.local.set":case"storage.sync.set":return h.storage.set(r);case"storage.local.remove":case"storage.sync.remove":return h.storage.remove(r);case"storage.local.clear":return h.storage.clear("local"),r;case"storage.sync.clear":return h.storage.clear("sync"),r;case"tabs.create":return h.tabs.create(r);case"tabs.executeScript":return h.tabs.executeScript(r);default:return r}}static transformPath(e){const r={"tabs.executeScript":"scripting.executeScript"};if(void 0!==r[e])return r[e];const s={browserAction:"action"};for(const[r,t]of Object.entries(s))if(e.startsWith(`${r}.`))return e.replace(`${r}.`,`${t}.`);return e}static guardedKeys(){return Object.values(f(x))}static storage={set:e=>(h.guardedKeys().forEach((r=>{delete e[0][r]})),e),remove(e){const r=h.guardedKeys(),[s]=e;return Array.isArray(s)?e[0]=s.filter((e=>!r.includes(e))):r.includes(s)&&(e[0]=[]),e},async clear(e){const s=await r().storage[e].get(),t={};h.guardedKeys().forEach((e=>{void 0!==s[e]&&(t[e]=s[e])})),setTimeout((()=>{r().storage[e].set(t)}),1e3)}};static tabs={create(e){const{url:s}=e[0];return void 0!==s&&s.startsWith("chrome-extension:")&&(e[0].url=r().runtime.getURL(`html/page.html?url=${encodeURIComponent(s)}`)),e},executeScript:e=>[{target:{tabId:e[0]},world:"MAIN",injectImmediately:!0,func:e=>{const r=document.createElement("script"),s=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));function t(){setTimeout((()=>{URL.revokeObjectURL(s),r.remove()}),500)}try{if(document.head&&window.vendor_cp_redom__v3)r.src=s,document.head.appendChild(r);else{const e=setInterval((()=>{document.head&&window.vendor_cp_redom__v3&&(r.src=s,document.head.appendChild(r),clearInterval(e))}),10)}}catch(e){t()}r.onload=t,r.onerror=t},args:[e[1].code??""]}]}}const _={};const b=function(e){let r=_[e];if(void 0!==r)return r;const s=e.split(".");let t=null;for(r=chrome;s.length;)t=r,r=t[s.shift()];return r?(_[e]=r.bind(t),_[e]):(...r)=>{o.warn(`${e} is not a valid function.`,{args:r})}},y=[],v=new Map;const w=function(e){e.on("chrome: call method",(({path:e,args:r,hasCallback:s})=>{r=h.transformArgs(e,r),e=h.transformPath(e);const t=b(e);return s?new Promise((e=>{t(...r,((...r)=>{chrome.runtime.lastError,e(...r)}))})):t(...r)})),e.on("chrome: add listener",(({event:r})=>{if(y.includes(r))return;y.push(r);b(`${r}.addListener`)(((...s)=>{const t={event:r,args:s};e.send("sandbox","chrome: listener result",t)}))})),e.on("chrome: add runtime message listener",(()=>{y.includes("runtime.onMessage")||(y.push("runtime.onMessage"),r().runtime.onMessage.addListener(((r,s)=>{const{namespace:t}=r;if(!t||t!==a.NAMESPACE)return new Promise((t=>{const n=d();v.set(n,t);const o={message:r,sender:s,responseId:n};e.send("sandbox","chrome: runtime on message",o)}))})))})),e.on("chrome: runtime message response",(({responseId:e,args:r})=>{const s=v.get(e);s&&(s(...r),v?.delete(e))}))},E=new a("content/bridge"),P=new class{targetWindow;NAMESPACE="migomhggnppjdijnfkiimcpjgnhmnale__crosspilot_window_communication";globalListener;listeners={};responseListeners=new Map;constructor(e,r){this.targetWindow=r,window.addEventListener("message",(r=>{if(r.data.namespace!==this.NAMESPACE)return;const{type:s}=r.data;"response"===s?this.handleResponse(r.data):"message"===s&&r.data.target===e&&this.handleMessage(r.data)}))}onAll(e){this.globalListener=e}on(e,r){this.listeners[e]=r}send(e,r,s){return new Promise((t=>{const n=d();this.responseListeners.set(n,t);const o={type:"message",target:e,name:r,uuid:n,data:s};this.postMessage(o)}))}postMessage(e){this.targetWindow.postMessage({namespace:this.NAMESPACE,...e},"*")}async handleMessage(e){const{name:r}=e,s=this.listeners[r];if("function"==typeof this.globalListener){const r=await Promise.resolve(this.globalListener(e.name,e.data,s));return void this.postMessage({type:"response",response:r,responseFor:e.uuid})}if("function"!=typeof s)return void o.warn(`Listener for message "${r}" not found.`,{message:e,...this.listeners});const t=await Promise.resolve(s(e.data));this.postMessage({type:"response",response:t,responseFor:e.uuid})}handleResponse(e){const{response:r,responseFor:s}=e,t=this.responseListeners.get(s);"function"==typeof t&&(t(r),this.responseListeners.delete(s))}}("content/bridge",window);w(P),P.on("main: get sandbox content script",(e=>E.send("background","main: get sandbox content script",e)))})()})();