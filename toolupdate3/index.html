<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF Overlay Editor</title>
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
    <link rel="preload" href="./Bookerly-Regular.ttf" as="font" type="font/ttf" crossorigin>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/controls.css">
    <link rel="stylesheet" href="css/overlays.css">
    <link rel="stylesheet" href="css/coordinates.css">
    <link rel="stylesheet" href="css/modal.css">
</head>
<body>
    <header id="controls">
        <div class="control-group file-inputs">
            <div class="file-input-wrapper">
                <label for="file-input" class="btn">Choose PDF</label>
                <span id="pdf-file-name">No file selected</span>
                <input type="file" id="file-input" accept=".pdf" class="visually-hidden">
            </div>
            <div class="file-input-wrapper">
                <label for="json-input" class="btn">Choose JSON</label>
                <span id="json-file-name">Using default</span>
                <input type="file" id="json-input" accept=".json" class="visually-hidden">
            </div>
            <div class="file-input-wrapper coord-order-wrapper">
                <span class="coord-label">Global:</span>
                <div id="coord-display" class="coord-display" title="Global coordinate order">TLBR</div>
                <div class="coord-buttons">
                    <button class="coord-btn" data-coord="T" title="Top">T</button>
                    <button class="coord-btn" data-coord="L" title="Left">L</button>
                    <button class="coord-btn" data-coord="B" title="Bottom">B</button>
                    <button class="coord-btn" data-coord="R" title="Right">R</button>
                </div>
            </div>
        </div>
        <div class="control-group options">
            <div class="theme-wrapper">
                <span>Theme:</span>
                <div id="palette-container"></div>
            </div>
            <div class="slider-wrapper">
                <label for="opacity-slider">Opacity:</label>
                <input type="range" id="opacity-slider" min="1" max="100" value="97">
                <span id="opacity-value">97%</span>
            </div>
            <div class="slider-wrapper">
                <label for="brightness-slider">Text:</label>
                <input type="range" id="brightness-slider" min="0" max="100" value="50">
                <span id="brightness-value">50%</span>
            </div>
            <div class="slider-wrapper">
                <label for="spacing-slider">Spacing:</label>
                <input type="range" id="spacing-slider" min="10" max="100" value="30">
                <span id="spacing-value">0.3em</span>
            </div>
        </div>
        <div class="control-group actions">
            <div class="expand-controls">
                <input type="number" id="expand-amount" value="3" min="1" step="1" title="Amount to expand all overlays">
                <button id="expand-all-btn" class="btn">Expand All</button>
            </div>
            <button id="split-pdf-btn" class="btn btn-warning" title="Split PDF (Ctrl+Shift+S)">ðŸ“„ Split PDF</button>
            <button id="save-print-btn" class="btn" title="Print (Ctrl+Shift+P)">Print Exporter</button>
            <button id="save-direct-pdf-btn" class="btn" title="Export PDF (Ctrl+Shift+E)">PDF Exporter</button>
            <button id="save-html-btn" class="btn btn-primary" title="Export HTML (Ctrl+Shift+H)">HTML Exporter</button>
            <span id="page-info">Please select a PDF file</span>
        </div>
    </header>

    <main id="pdf-container">
        <div class="loading">Select a PDF file to begin</div>
    </main>

    <div id="split-modal" class="modal" role="dialog" aria-modal="true">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ðŸ“„ Split PDF Options</h2>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="split-option">
                    <input type="radio" id="split-all" name="split-mode" value="all" checked>
                    <label for="split-all">
                        <strong>Split All Pages</strong>
                        <span class="option-desc">Export each page as individual PDF</span>
                    </label>
                </div>

                <div class="split-option">
                    <input type="radio" id="split-by-files" name="split-mode" value="by-files">
                    <label for="split-by-files">
                        <strong>Split by Number of Files</strong>
                        <span class="option-desc">Divide PDF into N equal files</span>
                    </label>
                    <div class="option-input">
                        <label>Number of files:</label>
                        <input type="number" id="num-files" min="2" max="100" value="5">
                    </div>
                </div>

                <div class="split-option">
                    <input type="radio" id="split-by-pages" name="split-mode" value="by-pages">
                    <label for="split-by-pages">
                        <strong>Split by Number of Pages</strong>
                        <span class="option-desc">Group every N pages together</span>
                    </label>
                    <div class="option-input">
                        <label>Pages per file:</label>
                        <input type="number" id="pages-per-file" min="1" max="100" value="10">
                    </div>
                </div>

                <div class="split-option">
                    <input type="radio" id="split-range" name="split-mode" value="range">
                    <label for="split-range">
                        <strong>Export Page Range</strong>
                        <span class="option-desc">Export consecutive pages</span>
                    </label>
                    <div class="option-input">
                        <label>From page:</label>
                        <input type="number" id="range-start" min="1" value="1">
                        <label>To page:</label>
                        <input type="number" id="range-end" min="1" value="10">
                    </div>
                </div>

                <div class="split-option">
                    <input type="radio" id="split-custom" name="split-mode" value="custom">
                    <label for="split-custom">
                        <strong>Export Specific Pages</strong>
                        <span class="option-desc">Choose individual pages to export</span>
                    </label>
                    <div class="option-input">
                        <label>Page numbers (comma-separated):</label>
                        <input type="text" id="custom-pages" placeholder="e.g., 1, 5, 10, 15-20, 25">
                        <span class="input-hint">Examples: "1,5,10" or "1-5,10,15-20"</span>
                    </div>
                </div>

                <div class="modal-info">
                    <p><strong>Total pages:</strong> <span id="modal-total-pages">0</span></p>
                    <p><strong>Estimated output:</strong> <span id="modal-estimate">-</span></p>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn" id="modal-cancel">Cancel</button>
                <button class="btn btn-primary" id="modal-export">Export</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/main.js"></script>
</body>
</html>