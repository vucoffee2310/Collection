<!DOCTYPE html>
<html>
<head>
  <style>
    body { width: 250px; padding: 15px; font-family: Arial, sans-serif; }
    button { width:100%; padding:10px; margin:10px 0; border:none; border-radius:4px; background:#4285f4; color:white; font-weight:bold; cursor:pointer; }
    button:hover { background: #3367d6; }
    button:disabled { background:#ccc; cursor:not-allowed; }
    #status { margin-top:10px; padding:8px; border-radius:4px; display:none; }
    .success { background:#d4edda; color:#155724; }
    .error { background:#f8d7da; color:#721c24; }
  </style>
</head>
<body>
  <h3>Simple Inspector</h3>
  <button id="startBtn">Start Inspecting</button>
  <button id="stopBtn" disabled>Stop Inspecting</button>
  <div id="status"></div>
  <div id="info">Right-click or use Ctrl+Shift+I. Click any element to copy as Markdown.</div>

  <script>
    const startBtn = document.getElementById('startBtn');
    const stopBtn = document.getElementById('stopBtn');
    const statusDiv = document.getElementById('status');
    const infoDiv = document.getElementById('info');

    const showStatus = (msg, cls) => {
      statusDiv.textContent = msg;
      statusDiv.className = cls;
      statusDiv.style.display = 'block';
      setTimeout(() => statusDiv.style.display = 'none', 3000);
    };

    const sendMessage = async (action) => {
      const [tab] = await chrome.tabs.query({ active: true, currentWindow: true });
      return chrome.tabs.sendMessage(tab.id, { action });
    };

    startBtn.onclick = async () => {
      try {
        await sendMessage('startInspectMode');
        startBtn.disabled = true;
        stopBtn.disabled = false;
        infoDiv.innerHTML = '<p>Click any element to copy as Markdown.</p>';
        showStatus('Started', 'success');
      } catch (e) { showStatus('Error: ' + e.message, 'error'); }
    };

    stopBtn.onclick = async () => {
      try {
        await sendMessage('stopInspectMode');
        startBtn.disabled = false;
        stopBtn.disabled = true;
        infoDiv.innerHTML = '';
       