(()=>{var e={3156:function(e,t,s){var n,o;!function(r,i){"use strict";n=function(){var e=function(){},t="undefined",s=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],o={},r=null;function i(e,t){var s=e[t];if("function"==typeof s.bind)return s.bind(e);try{return Function.prototype.bind.call(s,e)}catch(t){return function(){return Function.prototype.apply.apply(s,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&s?a:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}function c(){for(var s=this.getLevel(),o=0;o<n.length;o++){var r=n[o];this[r]=o<s?e:this.methodFactory(r,s,this.name)}if(this.log=this.debug,typeof console===t&&s<this.levels.SILENT)return"No console available for logging"}function d(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function u(e,t,s){return l(e)||d.apply(this,arguments)}function p(e,s){var i,a,l,d=this,p="loglevel";function h(e){var s=(n[e]||"silent").toUpperCase();if(typeof window!==t&&p){try{return void(window.localStorage[p]=s)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"="+s+";"}catch(e){}}}function g(){var e;if(typeof window!==t&&p){try{e=window.localStorage[p]}catch(e){}if(typeof e===t)try{var s=window.document.cookie,n=encodeURIComponent(p),o=s.indexOf(n+"=");-1!==o&&(e=/^([^;]+)/.exec(s.slice(o+n.length+1))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}}function m(){if(typeof window!==t&&p){try{window.localStorage.removeItem(p)}catch(e){}try{window.document.cookie=encodeURIComponent(p)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function f(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?p+=":"+e:"symbol"==typeof e&&(p=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=s||u,d.getLevel=function(){return null!=l?l:null!=a?a:i},d.setLevel=function(e,t){return l=f(e),!1!==t&&h(l),c.call(d)},d.setDefaultLevel=function(e){a=f(e),g()||d.setLevel(e,!1)},d.resetLevel=function(){l=null,m(),c.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(r!==d&&(i=f(r.getLevel())),c.call(d),r===d)for(var e in o)o[e].rebuild()},i=f(r?r.getLevel():"WARN");var w=g();null!=w&&(l=f(w)),c.call(d)}(r=new p).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=o[e];return t||(t=o[e]=new p(e,r.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return r.noConflict=function(){return typeof window!==t&&window.log===r&&(window.log=h),r},r.getLoggers=function(){return o},r.default=r,r},void 0===(o="function"==typeof n?n.call(t,s,t,e):n)||(e.exports=o)}()}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let t;const n=new Uint8Array(16);function o(){if(!t&&(t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(n)}const r=[];for(let e=0;e<256;++e)r.push((e+256).toString(16).slice(1));function i(e,t=0){return r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]}const a=function(t,s,n){if(e.randomUUID&&!s&&!t)return e.randomUUID();const r=(t=t||{}).random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,s){n=n||0;for(let e=0;e<16;++e)s[n+e]=r[e];return s}return i(r)};var l=s(3156),c=s.n(l);c().setLevel("error");const d=c();const u=(e,t)=>{const s=new Map;class n{UNSENT=0;OPENED=1;HEADERS_RECEIVED=2;LOADING=3;DONE=4;static UNSENT=0;static OPENED=1;static HEADERS_RECEIVED=2;static LOADING=3;static DONE=4;readyState=n.UNSENT;response=null;responseText="";responseType="";responseURL="";responseXML=null;status=0;statusText="";timeout=0;upload=void 0;withCredentials=!1;onreadystatechange=null;onabort=null;onerror=null;onload=null;onloadend=null;onloadstart=null;onprogress=null;ontimeout=null;request;mimeType;responseHeadersRaw="";responseHeaders={};open(e,t,s=!0,n,o){this.request={method:e,url:t.toString(),async:s,username:n,password:o,headers:[]},this.readyState=XMLHttpRequest.OPENED}setRequestHeader(e,t){this.request.headers.push({name:e,value:t})}overrideMimeType(e){this.mimeType=e}send(n=null){const o=a(),r={id:o,request:this.request,responseType:this.responseType,timeout:this.timeout,mimeType:this.mimeType,withCredentials:this.withCredentials,body:n};s.set(o,this),e.send(t,"xhr: send",r)}abort(){let n=null;for(const[e,t]of s)if(t===this){n=e;break}n&&(s.delete(n),e.send(t,"xhr: abort",{id:n}))}getAllResponseHeaders(){return this.responseHeadersRaw}getResponseHeader(e){return this.responseHeaders[e.toLowerCase()]??null}addEventListener(e,t){this[`on${e}`]=t}removeEventListener(e){this[`on${e}`]=null}dispatchEvent(){return!1}}return e.on("xhr: on event",(e=>{const t=s.get(e.id);if(!t)return;const{response:n}=e;t.readyState=n.readyState,t.response=n.response,t.responseText=n.responseText??"",t.responseType=n.responseType,t.status=n.status,t.statusText=n.statusText,t.responseURL=n.responseURL,t.responseHeadersRaw=e.responseHeaders,t.responseHeaders=function(e){const t={};return e.replace(/\r?\n/g,"\n").split("\n").forEach((e=>{const[s,n]=e.split(": ");s&&n&&(t[s.trim().toLowerCase()]=n.trim())})),t}(e.responseHeaders),t[`on${e.eventType}`]?.(e.event)})),n};class p{message;messageTarget;registerEvents;listeners=[];constructor(e,t,s){this.message=e,this.messageTarget=t,this.registerEvents=s,e.on("chrome: runtime on message",(s=>{const{responseId:n}=s,o=(...s)=>{const o={responseId:n,args:s};e.send(t,"chrome: runtime message response",o)};this.listeners.forEach((e=>e(s.message,s.sender,o)))}))}findCallbackIndex(e){let t=null;return this.listeners.forEach(((s,n)=>{s===e&&(t=n)})),t}assign(e){switch(e){case"addListener":return e=>{this.listeners.push(e),this.registerEvents&&this.message.send(this.messageTarget,"chrome: add runtime message listener")};case"removeListener":return e=>{const t=this.findCallbackIndex(e);t&&this.listeners.splice(t,1)};case"hasListener":return e=>null!==this.findCallbackIndex(e);case"hasListeners":return()=>this.listeners.length>0;default:return()=>{}}}}class h{message;messageTarget;registerEvents;listeners={};runtimeOnMessage;constructor(e,t,s){this.message=e,this.messageTarget=t,this.registerEvents=s,this.runtimeOnMessage=new p(e,t,s),e.on("chrome: listener result",(({event:e,args:t})=>{this.listeners[e]?.forEach((e=>e(...t)))}))}findCallbackIndex(e,t){let s=null;return this.listeners[e]?.forEach(((e,n)=>{e===t&&(s=n)})),s}assign(e,t){if("runtime.onMessage"===e||"extension.onMessage"===e)return this.runtimeOnMessage.assign(t);switch(t){case"addListener":return void 0===this.listeners[e]&&(this.listeners[e]=[]),t=>{this.listeners[e]?.push(t),this.registerEvents&&this.message.send(this.messageTarget,"chrome: add listener",{event:e})};case"removeListener":return t=>{if(void 0===this.listeners[e])return;const s=this.findCallbackIndex(e,t);s&&this.listeners[e]?.splice(s,1)};case"hasListener":return t=>null!==this.findCallbackIndex(e,t);case"hasListeners":return()=>void 0!==this.listeners[e]&&(this.listeners[e]?.length??0)>0;default:return()=>{}}}}class g{message;messageTarget;constructor(e,t){this.message=e,this.messageTarget=t}assign(e){return(...t)=>{let s=null;"function"==typeof t[t.length-1]&&(s=t.pop());const n={path:e,args:t,hasCallback:null!==s};s?this.message.send(this.messageTarget,"chrome: call method",n).then(s):this.message.send(this.messageTarget,"chrome: call method",n)}}}const m=["addListener","removeListener","hasListener","hasListeners","dispatch","dispatchToListener"];let f,w;function y(e,t,s=""){let n,o;const r=Object.keys(e);for(let i=0;i<r.length;i+=1){const a=r[i];if(o=s+(s?".":"")+a,n=e[a],null===n||"object"!=typeof n||Array.isArray(n)){if(void 0===t[a])if("[Function]"===n)if(m.includes(a)){const e=o.replace(`.${a}`,"");t[a]=f.assign(e,a)}else t[a]=w.assign(o);else t[a]=n}else void 0===t[a]&&(t[a]={}),y(n,t[a],o)}}const v=function(e,t,s,n,o,r,i,a,l){f=new h(e,t,s),w=new g(e,t);const c={...window.chrome}||{};c.tabs={},c.windows={},c.i18n={getUILanguage:()=>r,getMessage(e,t){let s=a[e]?.message??"";if(t){let e=0;s=s.replace(/\$(\w+)\$/g,(s=>t[e++]||s))}return s}};const d={...window.chrome.runtime}||{};return d.onMessage={},d.sendMessage=void 0,d.getManifest=()=>i,d.getURL=e=>l?.[e]??`${o}${e}`,c.runtime=d,y(n,c),c},E=new class{targetWindow;NAMESPACE="migomhggnppjdijnfkiimcpjgnhmnale__crosspilot_window_communication";globalListener;listeners={};responseListeners=new Map;constructor(e,t){this.targetWindow=t,window.addEventListener("message",(t=>{if(t.data.namespace!==this.NAMESPACE)return;const{type:s}=t.data;"response"===s?this.handleResponse(t.data):"message"===s&&t.data.target===e&&this.handleMessage(t.data)}))}onAll(e){this.globalListener=e}on(e,t){this.listeners[e]=t}send(e,t,s){return new Promise((n=>{const o=a();this.responseListeners.set(o,n);const r={type:"message",target:e,name:t,uuid:o,data:s};this.postMessage(r)}))}postMessage(e){this.targetWindow.postMessage({namespace:this.NAMESPACE,...e},"*")}async handleMessage(e){const{name:t}=e,s=this.listeners[t];if("function"==typeof this.globalListener){const t=await Promise.resolve(this.globalListener(e.name,e.data,s));return void this.postMessage({type:"response",response:t,responseFor:e.uuid})}if("function"!=typeof s)return void d.warn(`Listener for message "${t}" not found.`,{message:e,...this.listeners});const n=await Promise.resolve(s(e.data));this.postMessage({type:"response",response:n,responseFor:e.uuid})}handleResponse(e){const{response:t,responseFor:s}=e,n=this.responseListeners.get(s);"function"==typeof n&&(n(t),this.responseListeners.delete(s))}}("sandbox",window.parent);E.on("main: app ready",(async function(){const e=new URL(window.location.href).searchParams.get("page");if(!e)throw new Error("No page specified");"offscreen"!==e&&(async e=>{let t=0,s=0;const n=async()=>{const n=window.getComputedStyle(document.body),o=window.getComputedStyle(document.documentElement),r=parseFloat(n.width)||parseFloat(o.width)||document.body.offsetWidth||document.body.scrollWidth,i=parseFloat(n.height)||parseFloat(o.height)||document.body.offsetHeight||document.body.scrollHeight;s===r&&t===i||(await e(i,r),t=i,s=r)};setTimeout(n,150),setInterval(n,150),window.addEventListener("resize",n)})(((t,s)=>E.send(e,"main: resize",{height:t,width:s})));const t=await(async(e,t)=>{const s=await e.send(t,"local storage: get all"),n=new Map(Object.entries(s));return{get length(){return n.size},key:e=>Array.from(n.keys())[e]??null,getItem:e=>n.get(e)??null,setItem(s,o){n.set(s,o),e.send(t,"local storage: set",{key:s,value:o})},removeItem(s){n.delete(s),e.send(t,"local storage: remove",s)},clear(){n.clear(),e.send(t,"local storage: clear")}}})(E,e);Object.defineProperty(window,"localStorage",{value:t,writable:!1}),window.XMLHttpRequest=u(E,e);const s=await E.send(e,"main: get sandbox data");if(window.chrome=v(E,e,"offscreen"!==e,s.apiSchema,s.appUrl,s.uiLanguage,s.manifest,s.locale,s.webAccessibleResources),s.html&&(document.documentElement.innerHTML=s.html),s.css){const e=document.createElement("style");e.textContent=`body{padding:0!important}${s.css}`,document.head.appendChild(e)}new Function(s.js)(),E.send(e,"main: sandbox ready")}))})()})();